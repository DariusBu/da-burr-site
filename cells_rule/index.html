<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cells Rule</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="codemirror/lib/codemirror.css">
</head>
<body>
  <header>
    <h1>Cells Rule â€“ Multiplayer Cellular Automaton</h1>
  </header>

  <main>
    <div id="multiplayer-panel">
      <div id="connection-status" class="status disconnected">Disconnected</div>
      <div id="user-info"></div>
      <div id="user-list-container">
        <h3>Players Online</h3>
        <div id="user-list"></div>
      </div>
    </div>

    <div id="controls">
      <label for="editor">Your rule function (JS):</label>
      <div id="rule-examples">
        <p><strong>Safe Rule Examples:</strong></p>
        <ul>
          <li><code>Random Movement:</code> Move randomly in any direction</li>
          <li><code>Follow Leader:</code> Move towards the most common cell type</li>
          <li><code>Aggressive:</code> Move towards empty spaces or attack other cells</li>
        </ul>
        <p><strong>Available:</strong> Math, Array, Object, String, Number, Boolean, console.log</p>
        <p><strong>Forbidden:</strong> eval, fetch, document, window, localStorage, etc.</p>
      </div>
      <textarea id="editor">// Define how your cells behave
// The decide function receives a 3x3 neighborhood array
// Return: 'up', 'down', 'left', 'right', or 'stay'
function decide(neighborhood) {
  return 'up';
}</textarea>
      <button id="join-btn">Update Rule</button>
    </div>

    <canvas id="game-canvas" width="600" height="600"></canvas>
    
    <div id="error-message" style="display: none;"></div>
  </main>

  <script src="codemirror/lib/codemirror.js"></script>
  <script src="codemirror/mode/javascript/javascript.js"></script>
  <script src="rules.js"></script>
  <script src="ws-client.js"></script>
  <script src="cells_rule.js"></script>
</body>
</html>
